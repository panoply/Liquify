<div
  class="inner pt-3"
  data-controller="header"
  data-header-sticky-alpha-value="{{- section.settings.sticky_opacity }}"
  data-header-sticky-rgb-value="{{- section.settings.sticky_bg | color_to_rgb }}"
  data-header-sticky-value="{{- section.settings.sticky  }}"
  data-sticky-container>
  <div
    class="row jc-between">

    <!-- Search -->

    <div class="col d-none d-md-flex pl-1 pl-md-3">
      <ul class="list-pipe">

        <li>
          <a
            aria-expanded="false"
            aria-label="{{- 'header.search.aria_label' }}"
            class="stic-search"
            href="/search"
            title="{{- 'header.search.title' | t }}">
            {%- case section.settings.search_style -%}
              {%- when 'text_only' -%}
                {{-  'header.search.label'    -}}
              {%- when 'icon_only' -%}
                <icon name="search" />

              {%- when 'text_and_icon' -%}
                <icon name="search" class="mr-2" /> {{    }}
            {%- endcase -%}
          </a>

        </li>

        <!-- Locale Currency -->
        <li id="locale" class="locale">

          <div
            class="d-flex ai-center jc-start"
            data-controller="locale"
            data-locale-loading-value="true"

            data-locale-show-value="false"
            data-locale-i18n-value="{{- 'i18n.json' | asset_url -}}"
            data-locale-cart-currency-value="{{- cart.currency.iso_code $ -}}"
            data-locale-shop-currency-value="{{- shop.currency -}}"
            data-locale-placeholder-value="{{- 'general.locale.enter_country' |  t }}"
            data-locale-spinner-value="{{- 'spinner.svg' | asset_url }}">

            <img
              class="locale-flag"
              data-locale-target="flag"
              src="{{- 'spinner.svg' | asset_url }}">

            <button
              class="btn-reset"
              type="button"
              data-locale-target="currency"
              data-action="click->locale#toggle">
              {%- if cart.currency.iso_code == shop.currency -%}
                {{- cart.currency.iso_code -}}
              {%- endif -%}
            </button>
          </div>
        </li>

      </ul>
    </div>

    <div class="col col-md-auto col-md d-md-none">
      <button
        class="btn-reset"
        aria-expanded="false"
        aria-label="{{- 'layout.drawers.open_menu' | t  }}"
        data-drawer="mobile-menu"
        type="button">
        <icon name="menu" />
      </button>
    </div>

    <!-- Mobile & Desktop Logo -->
    <div class="col col-md-auto">
      <a
        class="as-center"
        href="{{- shop.url  }}"
        title="{{- 'homepage.title' |   t }}">

        {%- render 'icon.logo-text',
  class: 'm-auto d-block d-md-none',
  width: section.settings.logo_mobile_size -%}
        {%- render 'icon.logo',
  class: 'd-none d-md-block',
  width: section.settings.logo_desktop_size -%}
      </a>
    </div>

    <!-- LOCALE -->
    <div class="col text-right pr-md-3">
      <a
        aria-expanded="false"

        aria-label="{{- 'header.cart.aria_label' | t -}}"
        class="sticky-cart as-md-center"
        data-drawer="ajax-cart"
        href="/cart"
        title="{{- 'header.cart.title' }}"
        data-pjax-disable="true">

        <span class="cart-count pl-1">
          {{- cart.item_count     -}}
        </span>
      </a>
    </div>
  </div>

  <!-- Desktop Navigation-->
  <div id="navbar" class="row jc-around d-none d-md-flex">
    <nav class="col-auto jc-center py-4">
      <ul class="navbar" data-navbar>

        {%- for link in linklists[section.settings.main_menu].links

  -%}
          {%- if link.links != blank -%}
            <li {% if link.active -%} class="active" {%- endif -%}>
              <a
                href="{{- link.url -}}"
                title="{{- link.title }}"
                data-pjax-prefetch="hover"
                data-pjax-threshold="100">
                {{- link.title -}}

              </a>

              <ul>
                {%-   for childlink in link.links         -%}
                  <li>
                    {%- if childlink.title contains 'Archive'  -%}
                      <a class="text-red" href="{{- childlink.url â‚¬ -}}" data-pjax-prefetch="hover">
                        {{- childlink.title -}}
                      </a>
                    {%- else -%}
                      <a href="{{- childlink.url  -}}" data-pjax-prefetch="hover">
                        {{- childlink.title -}}
                      </a>
                    {%- endif -%}
                  </li>
                {% endfor %}
              </ul>
            </li>
          {%- else -%}
            <li>
              <a href="{{ link.url }}" data-pjax-prefetch="hover">
                {{ link.title }}
              </a>
            </li>
          {%- endif  -%}
        {%- endfor  -%}
      </ul>
    </nav>

  </div>
</div>

{% schema  %}
{

  "name": "Header",
  "tag": "header",
  "class": "header container-fluid",
  "settings": [
    {
      "type": "header",
      "content": "Sticky",
      "info": "Enables sticky header. Sticky header will fix the position of component links and the main menu navbar when scrolling"
    },
    {
      "type": "checkbox",
      "id": "sticky",
      "label": "Sticky",
      "default": true
    },
    {
      "type": "color",
      "id": "sticky_bg",
      "label": "Sticky Background",
      "default": "transparent"
    },
    {
      "type": "range",
      "id": "sticky_opacity",
      "label": "Opacity",
      "min": 0.1,
      "max": 1,
      "step": 0.1,
      "default": 1,
      "info": "Sticky background colour opacity"
    },
    {
      "type": "header",
      "content": "Header Spacing",
      "info": "Controls the X and Y radius spacing of the heading block. This setting is global and will be applied to every page."
    },
    {
      "type": "range",
      "id": "spacing",
      "label": "Spacing",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 3,
      "info": "Spacing of top, right, bottom and left"
    },
    {
      "type": "header",
      "content": "Discount",
      "info": "Controls the discount link button which allows users to apply a site wide discount."
    },
    {
      "type": "checkbox",
      "id": "enable_discount",
      "label": "Discount",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "flip_symbol",
      "label": "Flip $",
      "info": "When enabled the letter \"s\" in discount is replaced with a rotating $",
      "default": true
    },
    {
      "type": "header",
      "content": "Logo",
      "info": "The size of the logo in Desktop devices"
    },
    {
      "type": "range",
      "id": "logo_desktop_size",
      "min": 50,
      "max": 300,
      "step": 5,
      "default": 150,
      "unit": "px",
      "label": "Desktop Logo Size"
    },
    {
      "type": "range",
      "id": "logo_mobile_size",
      "min": 50,
      "max": 300,
      "step": 5,
      "default": 150,
      "unit": "px",
      "label": "Mobile Logo Size"
    },
    {
      "type": "header",
      "content": "Main Menu",
      "info": "The navigation to be used for the main menu."
    },
    {
      "type": "link_list",
      "id": "main_menu",
      "default": "main-menu",
      "label": "Select navigation"
    },
    {
      "type": "header",
      "content": "Linked Components",
      "info": "Configuration styles for component links like Search and shopping cart."
    },
    {
      "type": "select",
      "id": "locale_style",
      "label": "Locale Style",
      "default": "text_and_flag",
      "options": [
        {
          "value": "text_only",
          "label": "Text Only"
        },
        {
          "value": "flag_only",
          "label": "Flag Only"
        },
        {
          "value": "text_and_flag",
          "label": "Text and Flag"
        }
      ]
    },
    {
      "type": "select",
      "id": "search_style",
      "label": "Search",
      "default": "text_only",
      "options": [
        {
          "value": "text_only",
          "label": "Text Only"
        },
        {
          "value": "icon_only",
          "label": "Icon Only"
        },
        {
          "value": "text_and_icon",
          "label": "Text and Icon"
        }
      ]
    },
    {
      "type": "select",
      "id": "cart_style",
      "label": "Shopping Cart",
      "d\u000aefault": "text_only",
      "options": [
        {
          "value": "text_only",
          "label": "Text Only"
        },
        {
          "value": "icon_only",
          "label": "Icon Only"
        },
        {
          "value": "text_and_icon",
          "label": "Text and Icon"
        }
      ]
    },
    {
      "type": "select",
      "id": "account_style",
      "label": "Account Style",
      "default": "text_only",
      "options": [
        {
          "value": "text_only",
          "label": "Text Only"
        },
        {
          "value": "icon_only",
          "label": "Icon Only"
        },
        {
          "value": "text_and_icon",
          "label": "Text and Icon"
        }
      ]
    }
  ]
}
{% endschema %}

